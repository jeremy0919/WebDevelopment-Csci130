<html5> 
    <head>
        <link rel="stylesheet" href="style.css">
        <title> part 2</title>
    </head>
    <body>

<script>

    isMatrixCalled = false;
         window.onload=function(){
        isMatrixCalled = false;
         }
 function matrixMultiply(){
    let length = document.getElementById("m1").value;
    let height = document.getElementById("n2").value;

    let matrix1 = [];
    let table1 = document.getElementById("table1");
    for (let i = 0; i < length; i++) {
        let row = [];
        for (let j = 0; j < length; j++) {
            let cell = table1.rows[i].cells[j];
            let inputValue = cell.querySelector('input').value; // uses quert selector to get value from input, without it returns nan
            row.push(parseFloat(inputValue)); 
        }
        matrix1.push(row);
    }

    let matrix2 = [];
    let table2 = document.getElementById("table2");
    for (let i = 0; i < length; i++) {
        let row = [];
        for (let j = 0; j < height; j++) {
            let cell = table2.rows[i].cells[j];
            let inputValue = cell.querySelector('input').value;
            row.push(parseFloat(inputValue));
        }
        matrix2.push(row);
    }


    let resultMatrix = new Array(length);
    for (let i = 0; i < length; i++) {
        resultMatrix[i] = new Array(height);
    }

    for (let i = 0; i < length; ++i) {
        for (let j = 0; j < height; ++j) {
            let sum = 0;
            for (let k = 0; k < length; ++k) {
            
                sum += matrix1[i][k] * matrix2[k][j];
            }
  
            resultMatrix[i][j] = sum;
        }
    }

    const body = document.body,
                Table3 = document.createElement('table');
                Table3.style.width = '100px';
         
                Table3.style.borderCollapse = 'collapse';
                Table3.style.border = '1px solid black';
                
                for (let i = 0; i < length; i++) {
                    const tr = Table3.insertRow();
                    for (let j = 0; j < height; j++) {
                        const td = tr.insertCell();
 
                            td.appendChild(document.createTextNode(resultMatrix[i][j]));
                            td.style.border = '1px solid black';
                        
                    }
                }
            body.appendChild(Table3);
 }
 function FinalMatrix(x,y){

 }
 function matrix(){ 
    var m1 = document.getElementById("m1").value;
    var m2 = document.getElementById("m2").value;
    var n1 = document.getElementById("n1").value;
    var n2 = document.getElementById("n2").value;
            tableCreate(m1,n1, "table1"); // tables created still need to modify values in tables and matrix multiply
           
            tableCreate(m2,n2, "table2");
isMatrixCalled = true;
        }
        function tableCreate(N,M, name) {
if(name == "table1"){
                const body = document.body,
                Table1 = document.createElement('table');
                Table1.style.width = '100px';
         
                Table1.style.borderCollapse = 'collapse';
                Table1.style.border = '1px solid black';
                
                for (let i = 0; i < N; i++) {
                    const tr = Table1.insertRow();
                    for (let j = 0; j < M; j++) {
                        const td = tr.insertCell();
                        
                            td.appendChild(document.createElement("input"));

                            td.style.border = '1px solid black';
                        
                    }
                }
            body.appendChild(Table1);
            Table1.id = "table1";
            }
                        else {
                const body = document.body,
                Table2 = document.createElement('table');
                Table2.style.width = '100px';
         
                Table2.style.borderCollapse = 'collapse';
                Table2.style.border = '1px solid black';
                
                for (let i = 0; i < N; i++) {
                    const tr = Table2.insertRow();
                    for (let j = 0; j < M; j++) {
                        const td = tr.insertCell();
 
                            td.appendChild(document.createElement("input"));

                            td.style.border = '1px solid black';
                        
            }
                        }
            body.appendChild(Table2);
            Table2.id = "table2";
            }
            }
            
    </script>
   
   <form>
    
    <input type="text" id="m1" value="2">
    <input type="text" id="n1" value="3">
    <input type="text" id="m2" value="3">
    <input type="text" id="n2" value="2">
</form>
<button id = "submit" onclick="matrix()">submit</button> 
<button ng-show="isMatrixCalled" onclick="matrixMultiply()">button 2</button>

    </body>
</html5>