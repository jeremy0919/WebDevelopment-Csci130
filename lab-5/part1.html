<html5> 
    <head>
        <link rel="stylesheet" href="style.css">
        <title> part 4</title>
    </head>
    <body>

    <script>
            var output = 0; // keeps track of total
        var previous =0; // keeps track of previous/ next number
        var current =0;
        var lastfunct = "x"; // last function called
        var input = ""; // input string to be displayed
        let val = document.getElementById("plus");
        paragraph = document.querySelector("p"); 
        window.onload=function(){
        paragraph = document.querySelector("p"); // where input string gets declared
        var output = 0;
        var previous =0;
        var current =0;
        var lastfunct = "x";
        var lastval = "";
        var input = "";
        }
  
        function display(event){
            OnAction(event);
            lastfunct = "";
            alert(output);
        }
        function multiply(event){
            if(event == 1){
              
                output = Number(previous) * output; // needs to be fixed
                
            }
            if(event!=1){
              //  OnAction(event);
                lastfunct = "multiply";
                input = input+ "*";
            }  
            previous ="";
            paragraph.textContent = input;
        }
        function OnAction(event){
            if(lastfunct!="x"){
                if(lastfunct == "plus"){
                    plus(1);
                }
                if(lastfunct == "minus"){
                    minus(1);
                }
                if(lastfunct == "multiply"){
                    multiply(1);
                }
                if(lastfunct == "divide"){
                    divide(1);
                }
            }
        }

        function root(event){

            output = Math.sqrt(output);
            input = output;
            previous ="";
            paragraph.textContent = input;
        }

        function sign(event){// not a lot of stupidity checks
            let temp = previous.length;
            input = input.slice(0,-length);
            previous = previous*-1;
            input = input+previous;
            paragraph.textContent = input;
        }
        function clear(event){
            output = 0;
            previous =0;
            current =0;
            lastfunct = "x";
            lastval = "";
            input = " ";
            alert(output);
            paragraph.textContent = input;
        }
        function divide(event){
            if(event == 1){

                output = output/ Number(previous); //needs to be tested
                
            }
            if(event!=1){
              //  OnAction(event);
                lastfunct = "divide";
                input = input+ "/";
            }  
            previous ="";
            paragraph.textContent = input;
        }
        function plus(event){
            if(event!=1){
                OnAction(event);
                lastfunct = "plus";
                input = input+ "+";
            }
           if(event == 1){
            output = Number(previous) + output;
           }
            previous ="";
            paragraph.textContent = input;
        }
        function minus(event){

            if(event!=1){
            OnAction(event);
            input = input + "-";
            lastfunct = "minus"
            }
            if(lastfunct !="x"){
            output = output - Number(previous);
            }
            previous = "";
            paragraph.textContent = input;
        }
        function six(event){
            input = input +6;
            previous = previous+"6";
            if(lastfunct == "x"){
                output = Number(previous);
             
            }
            paragraph.textContent = input;
        }
        function one(event){
            input = input +1;
            previous = previous+"1"; // need to both keep track of value but also allow for values over 10
            if(lastfunct == "x"){
                output =  Number(previous);
            }
            paragraph.textContent = input;
        }
        function two(event){
            input = input +2;
            previous = previous +"2";
            if(lastfunct == "x"){
                output = Number(previous);
            }
            paragraph.textContent = input;
        }
        function three(event){
            input = input +3;
            previous = previous +"3";
            if(lastfunct == "x"){
                output =  Number(previous);
            }
            paragraph.textContent = input;
        }
        function four(event){
            input = input +4;
            previous = previous +"4";
            if(lastfunct == "x"){
                output =  Number(previous);
            }
            paragraph.textContent = input;
        }
        function five(event){
            input = input +5;
            previous = previous+"5";
            if(lastfunct == "x"){
                output =  Number(previous);
            }
            paragraph.textContent = input;
        }
        function seven(event){
            input = input +7;
            previous = previous+"7";
            if(lastfunct == "x"){
                output = Number(previous);
            }
            paragraph.textContent = input;
        }
        function eight(event){
            input = input +8;
            previous = previous+"8";
            if(lastfunct == "x"){
                output =  Number(previous);
            }
            paragraph.textContent = input;
        }
        function nine(event){
            input = input +9;
            previous = previous+"9";
            if(lastfunct == "x"){
                output =  Number(previous);
            }
            paragraph.textContent = input;
        }
        function zero(event){
            input = input +0;
            previous = previous+"0";
            if(lastfunct == "x"){
                output = Number(previous);
            }
            paragraph.textContent = input;
        }

        function matrix(m1,n1,m2,n2){ 
            tableCreate(m1,n1);
            tableCreate(m2,n2);
        }
        function tableCreate(N,M) {
                const body = document.body,
                Table1 = document.createElement('table');
                Table1.style.width = '100px';
         
                Table1.style.borderCollapse = 'collapse';
                Table1.style.border = '1px solid black';
                for (let i = 0; i < N; i++) {
                    const tr = Table1.insertRow();
                    for (let j = 0; j < M; j++) {
                        const td = tr.insertCell();
                        if(j ==0){  
                            td.appendChild(document.createTextNode());
                            td.style.border = '1px solid black';
                        }
                        else{
                            td.appendChild(document.createTextNode());
                            td.style.border = '1px solid black';
                        }
                    }
                }
            body.appendChild(Table1);
            }
            
    isMatrixCalled = false;

 function matrixMultiply(){
    let length = document.getElementById("m1").value;
    let height = document.getElementById("n2").value;

    let matrix1 = [];
    let table1 = document.getElementById("table1");
    for (let i = 0; i < length; i++) {
        let row = [];
        for (let j = 0; j < length; j++) {
            let cell = table1.rows[i].cells[j];
            let inputValue = cell.querySelector('input').value; // uses quert selector to get value from input, without it returns nan
            row.push(parseFloat(inputValue)); 
        }
        matrix1.push(row);
    }

    let matrix2 = [];
    let table2 = document.getElementById("table2");
    for (let i = 0; i < length; i++) {
        let row = [];
        for (let j = 0; j < height; j++) {
            let cell = table2.rows[i].cells[j];
            let inputValue = cell.querySelector('input').value;
            row.push(parseFloat(inputValue));
        }
        matrix2.push(row);
    }


    let resultMatrix = new Array(length);
    for (let i = 0; i < length; i++) {
        resultMatrix[i] = new Array(height);
    }

    for (let i = 0; i < length; ++i) {
        for (let j = 0; j < height; ++j) {
            let sum = 0;
            for (let k = 0; k < length; ++k) {
            
                sum += matrix1[i][k] * matrix2[k][j];
            }
  
            resultMatrix[i][j] = sum;
        }
    }

    const body = document.body,
                Table3 = document.createElement('table');
                Table3.style.width = '100px';
         
                Table3.style.borderCollapse = 'collapse';
                Table3.style.border = '1px solid black';
                
                for (let i = 0; i < length; i++) {
                    const tr = Table3.insertRow();
                    for (let j = 0; j < height; j++) {
                        const td = tr.insertCell();
 
                            td.appendChild(document.createTextNode(resultMatrix[i][j]));
                            td.style.border = '1px solid black';
                        
                    }
                }
            body.appendChild(Table3);
 }
 function FinalMatrix(x,y){

 }
 function matrix(){ 
    var m1 = document.getElementById("m1").value;
    var m2 = document.getElementById("m2").value;
    var n1 = document.getElementById("n1").value;
    var n2 = document.getElementById("n2").value;
            tableCreate(m1,n1, "table1"); // tables created still need to modify values in tables and matrix multiply
           
            tableCreate(m2,n2, "table2");
isMatrixCalled = true;
        }
        function tableCreate(N,M, name) {
if(name == "table1"){
                const body = document.body,
                Table1 = document.createElement('table');
                Table1.style.width = '100px';
         
                Table1.style.borderCollapse = 'collapse';
                Table1.style.border = '1px solid black';
                
                for (let i = 0; i < N; i++) {
                    const tr = Table1.insertRow();
                    for (let j = 0; j < M; j++) {
                        const td = tr.insertCell();
                        
                            td.appendChild(document.createElement("input"));

                            td.style.border = '1px solid black';
                        
                    }
                }
            body.appendChild(Table1);
            Table1.id = "table1";
            }
                        else {
                const body = document.body,
                Table2 = document.createElement('table');
                Table2.style.width = '100px';
         
                Table2.style.borderCollapse = 'collapse';
                Table2.style.border = '1px solid black';
                
                for (let i = 0; i < N; i++) {
                    const tr = Table2.insertRow();
                    for (let j = 0; j < M; j++) {
                        const td = tr.insertCell();
 
                            td.appendChild(document.createElement("input"));

                            td.style.border = '1px solid black';
                        
            }
                        }
            body.appendChild(Table2);
            Table2.id = "table2";
            }
            }
            
    </script>
    <div class = "calculator">
    <p> </p>
    <br>
    <p1></p1>
    <br><br>
    <button id = "plus" onclick="plus(event)" >+</button>
    <button id = "minus" onclick="minus(event)">-</button>
     <button id = "multiply" onclick="multiply(event)">*</button>
     <button id = "divide" onclick="divide(event)">/</button>
    <br><br>
    <button id = "switch" onclick="sign(event)">+/-</button>
    <button id = "clear" onclick="clear(event)">clear</button>
    <button id = "equals" onclick="display(event)">=</button>
    <br><br>
    <div class = "col1">
        <button id = "one" onclick="one(event)">1</button>
        <button id = "two" onclick="two(event)">2</button>
        <button id = "three" onclick="three(event)">3</button>
    </div> 
    <br><br>
<div class = "col2">
    <button id = "four" onclick="four(event)">4</button>
    <button id = "five" onclick="five(event)">5</button>
    <button id = "six" onclick="six(event)">6</button>
</div>   
<br><br>
<div class = "col3">
    <button id = "seven" onclick="seven(event)">7</button>
    <button id = "eight" onclick="eight(event)">8</button>
    <button id = "nine" onclick="nine(event)">9</button>
</div> 
<br><br>
<button id = "zero" onclick="zero(event)">0</button>
    </div>

<br>
<br>
<div class="mat">
<form>
    
    <input type="text" id="m1" value="2">
    <input type="text" id="n1" value="3">
    <input type="text" id="m2" value="3">
    <input type="text" id="n2" value="2">
</form>
<button id = "submit" onclick="matrix()">submit</button> 
<button ng-show="isMatrixCalled" onclick="matrixMultiply()">button 2</button>
</div>

    </body>
</html5>